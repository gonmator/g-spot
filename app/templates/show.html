{% from "macros.html" import min, render_pagination, join_items %}
{% extends "base.html" %}

{% macro render_tags_tree(tags_tree, inc_tags, indent) -%}
    {%- for tag in tags_tree recursive -%}
        {%- if tag['name'] in inc_tags %}
            <p class="enabled-item" style="padding-left:{{ 20 * loop.depth0 }}px">
                <a href="{{ url_for('show', mode='big', page=1, inc_tags=(inc_tags|join(',')), dis_inc_tag=tag['name']) }}"
                   class="enabled-button" style="background-color:DarkGreen;">-</a> {{ tag['name'] }}
            </p>
        {%- else %}
            <p class="disabled-item" style="padding-left:{{ 20 * loop.depth0 }}px">
                <a href="{{ url_for('show', mode='big', page=1, inc_tags=(inc_tags|join(',')), en_inc_tag=tag['name']) }}"
                   class="disabled-button" style="background-color:DarkGreen;">+</a> {{ tag['name'] }}
            </p>
        {%- endif -%}
        {%- if indent <= 0 %}
            {{ loop(tag['children']) }}
        {%- endif -%}
    {%- endfor %}
{%- endmacro -%}

{% block content %}
<div style="color:white;backgroud-color:black">
    <div class="tags-tree">
        <div style="color:Black;background-color:White;font-weight:bold;" align="center">Tags</div>
        {{ render_tags_tree(all_tags_tree, inc_tags, 0) }}
    </div>
    <div class="photo-collection">
        From {{ (photos_page.page - 1) * photos_page.per_page + 1 }} to {{ min(photos_page.total, photos_page.page *
        photos_page.per_page) }} (total: {{ photos_page.total }}).
        {{ render_pagination(photos_page, 'show', 'big', inc_tags) }}
        <hr>
        {% block show_mode %}{% endblock %}
        <hr>
        {{ render_pagination(photos_page, 'show', 'big', inc_tags) }}
    </div>
</div>
{% endblock %}
